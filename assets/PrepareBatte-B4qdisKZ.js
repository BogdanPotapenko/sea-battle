import{d as F,r as u,c,a as m,b as p,F as N,e as R,f,g as B,u as V,o as r,n as z,h as A,_ as M}from"./index-CboMY-I1.js";import{B as S,a as _,b as E,c as i,u as G}from"./BoardComponent-CE4Q2YC7.js";const L={class:"container"},O={class:"menu"},j={class:"ships"},q=["onClick"],D=F({__name:"PrepareBatte",setup(H){const k=V(),t=u(new S),o=u(new _),w=G,e=u(null),v=u(null),n=u(!1),C=a=>{e.value=e.value===a?null:a},y=a=>{e.value!==null?b(a):P(a)},b=a=>{const s=o.value.ships.find(l=>l.id===e.value);if(e.value!==null&&s){try{t.value.addShip(s,a,n.value)}catch{return}o.value.removeShip(e.value),e.value=null}},P=a=>{if(!e.value){const l=t.value.cells[a].ship;l&&(t.value.removeShip(l),o.value.ships.push(l))}},d=a=>{if(e.value!==null){const s=o.value.ships.find(l=>l.id===e.value);s&&(t.value.previewShip(s,a,n.value),v.value=a)}},h=()=>{t.value=new S,o.value=new _},$=()=>{e.value=null,h(),t.value.autoShipPlace(o.value.ships),o.value.ships=[]},g=()=>{w.set(t.value.cells),k.push({name:"battle"})};return window.onwheel=()=>{n.value=!n.value,t.value.deletePreviewShip(),v.value&&d(v.value)},(a,s)=>(r(),c("div",L,[m("div",O,[p(i,{onClick:h,value:"Reset"}),p(i,{onClick:$,value:"Auto"})]),p(E,{board:t.value,prepare:"",selected:e.value!==null,onAdd:y,onMouseenter:d,onMouseleave:s[0]||(s[0]=l=>t.value.deletePreviewShip())},null,8,["board","selected"]),m("div",j,[(r(!0),c(N,null,R(o.value.ships,(l,x)=>(r(),c("div",{key:x,class:z(["ship",{selected:e.value===l.id}]),style:A({width:25*l.type+"px"}),onClick:I=>C(l.id)},null,14,q))),128)),o.value.ships.length?B("",!0):(r(),f(i,{key:0,onClick:s[1]||(s[1]=l=>g()),value:"Start"}))]),e.value&&e.value>3?(r(),f(i,{key:0,class:"turn",onClick:s[2]||(s[2]=l=>n.value=!n.value),value:"turn"})):B("",!0)]))}}),Q=M(D,[["__scopeId","data-v-ea588e93"]]);export{Q as default};
