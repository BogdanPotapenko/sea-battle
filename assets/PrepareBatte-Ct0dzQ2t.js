import{d as x,r as n,c as v,a as m,b as c,F,e as N,f as R,g as V,u as $,o as r,n as z,h as A,_ as M}from"./index-DVHyzyA2.js";import{B as f,a as _,b as E,c as p,u as G}from"./BoardComponent-C83a1vju.js";const L={class:"container"},O={class:"menu"},j={class:"ships"},q=["onClick"],D=x({__name:"PrepareBatte",setup(H){const B=$(),t=n(new f),o=n(new _),S=G,l=n(null),i=n(null),u=n(!1),w=a=>{l.value=l.value===a?null:a},C=a=>{l.value!==null?k(a):y(a)},k=a=>{const s=o.value.ships.find(e=>e.id===l.value);if(l.value!==null&&s){try{t.value.addShip(s,a,u.value)}catch{return}o.value.removeShip(l.value),l.value=null}},y=a=>{if(!l.value){const e=t.value.cells[a].ship;e&&(t.value.removeShip(e),o.value.ships.push(e))}},d=a=>{if(l.value!==null){const s=o.value.ships.find(e=>e.id===l.value);s&&(t.value.previewShip(s,a,u.value),i.value=a)}},h=()=>{t.value=new f,o.value=new _},b=()=>{l.value=null,h(),t.value.autoShipPlace(o.value.ships),o.value.ships=[]},P=()=>{S.set(t.value.cells),B.replace({name:"battle"})};return window.onwheel=()=>{u.value=!u.value,t.value.deletePreviewShip(),i.value&&d(i.value)},(a,s)=>(r(),v("div",L,[m("div",O,[c(p,{onClick:h,value:"Reset"}),c(p,{onClick:b,value:"Auto"})]),c(E,{board:t.value,prepare:"",selected:l.value!==null,onAdd:C,onMouseenter:d,onMouseleave:s[0]||(s[0]=e=>t.value.deletePreviewShip())},null,8,["board","selected"]),m("div",j,[(r(!0),v(F,null,N(o.value.ships,(e,g)=>(r(),v("div",{key:g,class:z(["ship",{selected:l.value===e.id}]),style:A({width:25*e.type+"px"}),onClick:I=>w(e.id)},null,14,q))),128)),o.value.ships.length?V("",!0):(r(),R(p,{key:0,onClick:s[1]||(s[1]=e=>P()),value:"Start"}))])]))}}),Q=M(D,[["__scopeId","data-v-274571d1"]]);export{Q as default};
