var S=Object.defineProperty;var _=(a,s,o)=>s in a?S(a,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[s]=o;var l=(a,s,o)=>(_(a,typeof s!="symbol"?s+"":s,o),o);import{r as g,d as v,c as h,t as y,o as d,_ as C,a as c,F as u,e as f,n as B,h as M,m,g as w,p as k,l as E}from"./index-D5h4h0Jn.js";class J{constructor(){l(this,"cells",[]);l(this,"boardSize",100);this.cells=this.createBoard()}createBoard(){return[...Array(this.boardSize).map((o,e)=>e++)].map(function(o,e){return new x(e%10,Math.floor(e/10))})}previewShip(s,o,e){const i=this.cells[o];if(e){const t=this.getFilteredCells(i,s,"y");t.length&&t.forEach(r=>r.isPreview=!0)}else{const t=this.getFilteredCells(i,s,"x");t.length&&t.forEach(r=>r.isPreview=!0)}}deletePreviewShip(){this.cells.forEach(s=>s.isPreview=!1)}addShip(s,o,e){const i=this.cells[o];if(e){const t=this.getFilteredCells(i,s,"y");if(t.length)t.forEach(r=>r.ship=s),s.x=i.x,s.y=i.y,i.ship=s,this.getLockedCells([i,...t]).forEach(r=>r!==void 0?r.isFree=!1:null);else throw new Error}else{const t=this.getFilteredCells(i,s,"x");if(t.length)t.forEach(r=>r.ship=s),s.x=i.x,s.y=i.y,i.ship=s,this.getLockedCells([...t]).forEach(r=>r!==void 0?r.isFree=!1:null);else throw new Error}}removeShip(s){const o=[];this.cells.forEach(i=>{if(i.ship===s)return o.push(i),i.isPreview=!1,i.ship=null});const e=this.cells.filter(i=>i.ship);this.getLockedCells(o).forEach(i=>i!==void 0?i.isFree=!0:null),this.getLockedCells(e).forEach(i=>i!==void 0?i.isFree=!1:null)}autoShipPlace(s){let o=s.length,e=0;const i=t=>{try{let r=Math.floor(Math.random()*100),n=!!Math.floor(Math.round(Math.random()));for(;this.cells[r].ship&&!this.cells[r].isFree;)r=Math.floor(Math.random()*100),n=!!Math.floor(Math.round(Math.random()));this.addShip(t,r,n)}catch{i(t)}};for(;o>0;)try{i(s[e]),e++,o--}catch{i(s[e])}}attackShip(s){const o=this.cells.find(e=>e.x===s.x&&e.y===s.y);if(o&&(o.ship&&!o.isMissed?o.isHitted=!0:o.isMissed=!0,o.ship)){const e=this.cells.filter(i=>{var t,r;return((t=i.ship)==null?void 0:t.id)===((r=o.ship)==null?void 0:r.id)});e.some(i=>!i.isHitted)||(this.getLockedCells(e).forEach(t=>{if(!t.ship)return t.isMissed=!0}),o.isHitted&&e.forEach(t=>{t.ship&&(t.ship.dead=!0)}))}}getLockedCells(s){const o=[];return s.forEach(e=>{const i=[{x:e.x-1,y:e.y-1},{x:e.x,y:e.y-1},{x:e.x+1,y:e.y-1},{x:e.x-1,y:e.y},{x:e.x+1,y:e.y},{x:e.x-1,y:e.y+1},{x:e.x,y:e.y+1},{x:e.x+1,y:e.y+1}];i.forEach((t,r)=>{const n=this.cells.find(function(p){return p.x===i[r].x&&p.y===i[r].y});n&&o.push(n)})}),o}getFilteredCells(s,o,e){let i=s[e];const t=e==="y"?"x":"y",r=this.cells.filter(n=>{if(n.ship||!n.isFree||!n)return null;if(n[e]===i&&n[t]===s[t]&&n[e]<s[e]+o.type)return i++,n});return r.length<o.type?[]:r}}class x{constructor(s,o){l(this,"x");l(this,"y");l(this,"isFree",!0);l(this,"isPreview",!1);l(this,"isMissed",!1);l(this,"isHitted",!1);l(this,"ship",null);this.x=s,this.y=o}}class W{constructor(){l(this,"ships",[]);this.ships=this.crateBattleShips()}crateBattleShips(){const s=[];return[1,1,1,1,2,2,2,3,3,4].forEach(function(e,i){s.push(new F(e,i,!1))}),s}removeShip(s){const o=this.ships.findIndex(e=>e.id===s);this.ships.splice(o,1)}}class F{constructor(s,o,e){l(this,"type");l(this,"id");l(this,"x",null);l(this,"y",null);l(this,"dead",!1);this.type=s,this.id=o,this.dead=e}}function b(){const a=g(null);return{get:()=>a.value?a.value:null,set:e=>a.value=e}}const j=b(),H=v({__name:"ButtonComponent",props:{value:{}},setup(a){return(s,o)=>(d(),h("button",null,y(s.value),1))}}),q=C(H,[["__scopeId","data-v-553db3f9"]]),P=a=>(k("data-v-4e53edef"),a=a(),E(),a),L={class:"table"},$={class:"symbols"},I=P(()=>c("li",{class:"cell"},null,-1)),z={class:"numbers"},A={class:"board"},D=["onClick","onMouseenter"],N={key:0,class:"missed"},T=v({__name:"BoardComponent",props:{board:{},enemy:{type:Boolean},prepare:{type:Boolean},selected:{type:Boolean}},emits:["attack","add","mouseenter","mouseleave"],setup(a){const s=["A","B","C","D","E","F","G","H","I","J"],o=[1,2,3,4,5,6,7,8,9,10];return(e,i)=>(d(),h("div",L,[c("ul",$,[I,(d(),h(u,null,f(s,(t,r)=>c("li",{class:"cell",key:r},y(t),1)),64))]),c("div",null,[c("ul",z,[(d(),h(u,null,f(o,(t,r)=>c("li",{class:"cell",key:r},y(t),1)),64))]),c("div",A,[(d(!0),h(u,null,f(e.board.cells,(t,r)=>{var n;return d(),h("div",{key:r,class:B(["cell",{"has-ship":t.ship&&!e.enemy&&!t.isHitted,"not-free":!t.isFree&&!t.ship&&e.prepare,"attacked-ship":t.isHitted,hover:e.enemy&&!t.isHitted&&!t.isMissed,preview:t.isPreview,dead:(n=t.ship)==null?void 0:n.dead}]),style:M(!t.isPreview&&e.selected||t.isHitted||t.isMissed?{cursor:"not-allowed"}:e.selected||e.prepare&&t.ship||!e.prepare&&e.enemy?{cursor:"pointer"}:""),onClick:p=>e.prepare?e.$emit("add",r):e.$emit("attack",t),onMouseenter:m(p=>e.$emit("mouseenter",r),["prevent"]),onMouseleave:i[0]||(i[0]=m(p=>e.$emit("mouseleave"),["prevent"]))},[t.isMissed?(d(),h("div",N)):w("",!0)],46,D)}),128))])])]))}}),K=C(T,[["__scopeId","data-v-4e53edef"]]);export{J as B,W as a,K as b,q as c,j as u};
